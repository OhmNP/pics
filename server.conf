# PhotoSync Server Configuration
# This file contains all configurable settings for the PhotoSync server.
# Changes to most settings apply dynamically without requiring server restart.

# =============================================================================
# NETWORK SETTINGS
# =============================================================================
network:
  # TCP port for sync protocol and HTTP API
  port: 50505
  
  # UDP broadcast interval for client auto-discovery (milliseconds)
  udp_broadcast_interval: 5000
  
  # Maximum concurrent client connections
  max_connections: 10

# =============================================================================
# STORAGE SETTINGS
# =============================================================================
storage:
  # Directory for storing uploaded photos/videos
  photos_dir: "./storage/photos"
  
  # Directory for storing generated thumbnails
  thumbnails_dir: "./storage/thumbnails"
  
  # Maximum storage limit in GB (0 = unlimited)
  max_storage_gb: 100
  
  # Thumbnail generation settings
  thumbnail_size: 256          # Pixels (square)
  thumbnail_quality: 85        # JPEG quality (1-100)
  video_thumbnail_frame: 1     # Extract frame at N seconds for videos

# =============================================================================
# AUTHENTICATION SETTINGS
# =============================================================================
auth:
  # Session timeout in seconds
  # After this duration of inactivity, admin must re-login
  session_timeout_seconds: 60
  
  # bcrypt cost factor for password hashing (10-14 recommended)
  # Higher = more secure but slower
  bcrypt_cost: 12
  
  # Maximum failed login attempts before lockout
  max_failed_attempts: 5
  
  # Lockout duration in minutes after max failed attempts
  lockout_duration_minutes: 15

# =============================================================================
# PAIRING TOKEN SETTINGS
# =============================================================================
pairing:
  # Token expiration time in minutes
  token_expiration_minutes: 15
  
  # Token length in bytes (will be base64url-encoded)
  token_length_bytes: 32
  
  # Automatic cleanup interval for expired tokens (hours)
  auto_cleanup_interval_hours: 1
  
  # Maximum number of active (unused) tokens allowed
  max_active_tokens: 10

# =============================================================================
# RETENTION POLICIES
# =============================================================================
retention:
  # System log retention in days
  log_retention_days: 30
  
  # Audit log retention in days
  audit_log_retention_days: 90
  
  # Session retention in days (for historical tracking)
  session_retention_days: 7
  
  # Log cleanup job interval (hours)
  log_cleanup_interval_hours: 24
  
  # Audit log cleanup job interval (hours)
  audit_cleanup_interval_hours: 24

# =============================================================================
# UI/DASHBOARD SETTINGS
# =============================================================================
ui:
  # Default number of items per page for paginated lists
  default_page_size: 50
  
  # Maximum allowed page size
  max_page_size: 200
  
  # Auto-refresh interval for dashboard metrics (seconds)
  auto_refresh_interval: 30

# =============================================================================
# BACKGROUND JOBS
# =============================================================================
jobs:
  # Session cleanup interval (minutes)
  # Removes expired sessions from database
  session_cleanup_interval_minutes: 5
  
  # Enable automatic thumbnail generation on upload
  auto_generate_thumbnails: true
  
  # Maximum thumbnail generation queue size
  max_thumbnail_queue: 100

# =============================================================================
# LOGGING
# =============================================================================
logging:
  # Log level: debug, info, warning, error
  level: info
  
  # Log to file
  log_to_file: true
  log_file_path: "./logs/server.log"
  
  # Log to console
  log_to_console: true
  
  # Maximum log file size in MB before rotation
  max_log_file_size_mb: 100
  
  # Number of rotated log files to keep
  max_log_files: 5

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================
advanced:
  # Enable CORS for API (for development)
  enable_cors: true
  
  # Database file path
  database_path: "./photosync.db"
  
  # Enable database WAL mode for better concurrency
  enable_wal_mode: true
  
  # Database connection pool size
  db_pool_size: 5
